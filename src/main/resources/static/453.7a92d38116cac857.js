"use strict";(self.webpackChunkit_blog=self.webpackChunkit_blog||[]).push([[453],{8453:(z,p,i)=>{i.r(p),i.d(p,{BookSubcribeModule:()=>B});var s=i(6814),u=i(5861),l=i(4548),d=i(5273),f=i(7639),n=i(6689),m=i(2911),C=i(9304),O=i(5593),M=i(6068),a=i(6014),P=i(9836),h=i(8008),_=i(122);function b(o,c){if(1&o&&(n.TgZ(0,"div",17),n._uU(1),n.qZA()),2&o){const r=c.$implicit;n.xp6(1),n.Oqu(r)}}function v(o,c){if(1&o){const r=n.EpF();n.TgZ(0,"div",18),n.NdJ("click",function(){n.CHM(r);const e=n.oxw(2);return n.KtG(e.subcribe())}),n._uU(1,"Subcribe ngay"),n.qZA()}}const w=function(o){return["/tai-lieu/doc",o]};function x(o,c){if(1&o&&(n.TgZ(0,"div",19),n._uU(1,"\u0110\u1ecdc ngay"),n.qZA()),2&o){const r=n.oxw(2);n.Q6J("routerLink",n.VKq(1,w,r.pdf.name))}}function S(o,c){if(1&o&&(n.TgZ(0,"div",4)(1,"div",5),n._uU(2),n.qZA(),n.TgZ(3,"div",6)(4,"div",7),n._UZ(5,"img",8),n.qZA(),n.TgZ(6,"div",9)(7,"div",10),n.YNc(8,b,2,1,"div",11),n.qZA(),n.TgZ(9,"div",12),n._uU(10),n.qZA(),n.TgZ(11,"div",13),n._uU(12),n.qZA(),n.TgZ(13,"div",14),n._uU(14),n.qZA(),n.YNc(15,v,2,0,"div",15),n.YNc(16,x,2,3,"div",16),n.qZA()()()),2&o){const r=n.oxw();n.xp6(2),n.Oqu(r.pdf.name),n.xp6(3),n.Q6J("src",r.buildLogoUrl(),n.LSH),n.xp6(3),n.Q6J("ngForOf",r.buildTags(r.pdf.tags)),n.xp6(2),n.hij(" ",r.pdf.author," "),n.xp6(2),n.Oqu(r.pdf.description),n.xp6(2),n.Oqu(r.formatMoney(r.pdf.price)),n.xp6(1),n.Q6J("ngIf",!r.isSubcribe(r.pdf.id)),n.xp6(1),n.Q6J("ngIf",r.isSubcribe(r.pdf.id))}}let y=(()=>{var o;class c{constructor(t,e,g,I,F,N){this.userService=t,this.noticeFunction=e,this.pdfService=g,this.commonFunction=I,this.route=F,this.router=N,this.route.paramMap.subscribe(A=>{const J=A.get("id")||void 0;this.getAllBookWithPaging(J)})}ngOnInit(){this.userInfo=this.userService.getCurrentUserInfo()}buildFilterByName(t){const e=new f.G;return e.name=t,e.numsPerPage=1,e.pageNumber=0,e}getAllBookWithPaging(t){var e=this;return(0,u.Z)(function*(){const g=yield e.pdfService.filter(e.buildFilterByName(t));g.length&&(e.pdf=g[0]),e.isSubcribe(e.pdf.id)&&(e.router.routeReuseStrategy.shouldReuseRoute=()=>!1,e.router.onSameUrlNavigation="reload",e.router.navigate(["/tai-lieu/doc/",e.pdf.name])),e.breadscrumPath=`T\xe0i li\u1ec7u/\u0110\u0103ng k\xed/${e.pdf.name}`})()}isSubcribe(t){return this.userInfo.books?.find(e=>e==t)}buildTags(t){return t.split(",").map(e=>e.trim())}reNewUserInfo(t){this.userInfo=this.userService.getCurrentUserInfo();const e=[...this.userInfo.books,t];this.userService.updateUserInfoState({...this.userInfo,books:e}),this.userInfo=this.userService.getCurrentUserInfo()}subcribe(){var t=this;return(0,u.Z)(function*(){if(t.userService.isLogin())try{yield t.pdfService.subscriber(t.pdf.id),t.reNewUserInfo(t.pdf.id),t.noticeFunction.showNotice(new d.J("","\u0110\u0103ng k\xed s\xe1ch th\xe0nh c\xf4ng",l.Q.SUCCESS))}catch{t.noticeFunction.showNotice(new d.J("","C\xf3 l\u1ed7i khi \u0111\u0103ng k\xed s\xe1ch",l.Q.ERROR))}else t.noticeFunction.showNotice(new d.J("","B\u1ea1n c\u1ea7n login \u0111\u1ec3 \u0111\u0103ng k\xed s\xe1ch",l.Q.WARING))})()}formatMoney(t){return this.commonFunction.formatVND(t)}buildLogoUrl(){return this.commonFunction.buildBookCoverImageUrl(this.pdf.logoPath)}}return(o=c).\u0275fac=function(t){return new(t||o)(n.Y36(m.K),n.Y36(C.l),n.Y36(O.F),n.Y36(M.o),n.Y36(a.gz),n.Y36(a.F0))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-book-subcribe"]],decls:7,vars:2,consts:[[1,"wraper-container"],[3,"breadscrumPath"],[1,"wraper-main"],["class","left-container",4,"ngIf"],[1,"left-container"],[1,"title"],[1,"content"],[1,"left"],[3,"src"],[1,"right"],[1,"tags"],["class","tag",4,"ngFor","ngForOf"],[1,"author"],[1,"description"],[1,"price"],["class","subcribe-button btn-padding btn-cursor user-select-none",3,"click",4,"ngIf"],["class","subed-btn btn-padding btn-cursor ",3,"routerLink",4,"ngIf"],[1,"tag"],[1,"subcribe-button","btn-padding","btn-cursor","user-select-none",3,"click"],[1,"subed-btn","btn-padding","btn-cursor",3,"routerLink"]],template:function(t,e){1&t&&(n.TgZ(0,"div"),n._UZ(1,"header"),n.TgZ(2,"div",0),n._UZ(3,"breadscrumb",1),n.TgZ(4,"div",2),n.YNc(5,S,17,8,"div",3),n._UZ(6,"short-info-blog"),n.qZA()()()),2&t&&(n.xp6(3),n.Q6J("breadscrumPath",e.breadscrumPath),n.xp6(2),n.Q6J("ngIf",e.pdf))},dependencies:[s.sg,s.O5,P.q,h.e,_.G,a.rH],styles:[".wraper-container[_ngcontent-%COMP%]{padding:15px 60px}.wraper-container[_ngcontent-%COMP%]   .wraper-main[_ngcontent-%COMP%]{display:grid;grid-template-columns:3.5fr 1fr;grid-gap:40px}.wraper-container[_ngcontent-%COMP%]   .wraper-main[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:32px;font-style:normal;font-weight:700;line-height:normal}.wraper-container[_ngcontent-%COMP%]   .wraper-main[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin-top:20px;display:grid;grid-template-columns:3fr 5fr;gap:55px}.wraper-container[_ngcontent-%COMP%]   .wraper-main[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{text-align:center}.wraper-container[_ngcontent-%COMP%]   .wraper-main[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:358px;width:100%;vertical-align:middle;border-style:none;cursor:pointer;object-fit:cover;box-shadow:0 10px 20px #0000004d,0 6px 6px #00000040}.wraper-container[_ngcontent-%COMP%]   .wraper-main[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{flex-direction:column}.wraper-container[_ngcontent-%COMP%]   .wraper-main[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;padding:8px;-webkit-user-select:none;user-select:none;align-items:center;gap:34px}.wraper-container[_ngcontent-%COMP%]   .wraper-main[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:3px}.wraper-container[_ngcontent-%COMP%]   .wraper-main[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:13px;font-style:normal;font-weight:400;line-height:normal}.wraper-container[_ngcontent-%COMP%]   .wraper-main[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .tags[_ngcontent-%COMP%]{display:flex;align-items:center;margin:0 0 10px}.wraper-container[_ngcontent-%COMP%]   .wraper-main[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{border-radius:9px;background:var(--header-color-selected);width:-moz-fit-content;width:fit-content;display:flex;padding:2px 5px;justify-content:center;align-items:center;gap:10px;margin:0 19px 0 0;font-size:81.25%}.wraper-container[_ngcontent-%COMP%]   .wraper-main[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%]{font-weight:600;color:green;margin:0 0 10px}.wraper-container[_ngcontent-%COMP%]   .wraper-main[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#1c488b;text-align:justify;font-style:normal;font-weight:400;line-height:normal;margin-bottom:13px}.wraper-container[_ngcontent-%COMP%]   .wraper-main[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{color:#e66353;font-size:20px;font-style:normal;font-weight:700;line-height:normal;margin-bottom:13px}.wraper-container[_ngcontent-%COMP%]   .wraper-main[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .subcribe-button[_ngcontent-%COMP%]{color:#fff;text-align:center;font-style:normal;font-weight:700;line-height:normal;border-radius:9px;background:var(--main-color);width:-moz-fit-content;width:fit-content}.wraper-container[_ngcontent-%COMP%]   .wraper-main[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .subed-btn[_ngcontent-%COMP%]{color:#fff;text-align:center;font-style:normal;font-weight:700;line-height:normal;border-radius:9px;background:#00CC00;width:-moz-fit-content;width:fit-content}@media screen and (max-width: 500px){.wraper-container[_ngcontent-%COMP%]   .wraper-main[_ngcontent-%COMP%], .wraper-container[_ngcontent-%COMP%]   .wraper-main[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{grid-template-columns:1fr!important}}@media screen and (min-width: 500px){.wraper-container[_ngcontent-%COMP%]   .wraper-main[_ngcontent-%COMP%], .wraper-container[_ngcontent-%COMP%]   .wraper-main[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{grid-template-columns:1fr!important}}@media screen and (min-width: 800px){.wraper-container[_ngcontent-%COMP%]   .wraper-main[_ngcontent-%COMP%]{grid-template-columns:1fr!important}.wraper-container[_ngcontent-%COMP%]   .wraper-main[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{grid-template-columns:3fr 5fr!important}}@media screen and (min-width: 1000px){.wraper-container[_ngcontent-%COMP%]   .wraper-main[_ngcontent-%COMP%]{grid-template-columns:3.5fr 1fr!important}.wraper-container[_ngcontent-%COMP%]   .wraper-main[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{grid-template-columns:3fr 5fr!important}}"]}),c})();var Z=i(8457),k=i(8802),T=i(8567);const U=[{path:"",component:y}];let B=(()=>{var o;class c{}return(o=c).\u0275fac=function(t){return new(t||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[s.ez,Z.M,k.x,T.O,a.Bz.forChild(U)]}),c})()}}]);